
<!DOCTYPE html>
<html>
  <head>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      .wrap { max-width: 75em; min-height: 40em; height:100%; width:100%; margin: 0 auto; padding-top: 2.5%;}
      #map-canvas { height: 90%; }
    </style>
	
	<!-- CARREGANDO O API DO GOOGLE MAPS -->
    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=true">
	</script>
	
	<!-- FUNCAO JAVASCRIPT PARA CARREGAR O MAPA E CONFIGURAR ALGUMAS OPCOES BASICAS DISPONIVEIS NA API DO GOOGLE MAPS -->
    <script type="text/javascript">     
	  
	  var map;
      var centerPos = new google.maps.LatLng(-23.2146027,-45.8854213); // INSERIMOS A LATITUDE E LONGITUDE DA POSICAO DO MAPA QUE SELECIONAMOS
      var zoomLevel = 12;
      function initialize(){
        var mapOptions = {
          center: centerPos,
          zoom: zoomLevel
        };
        map = new google.maps.Map( document.getElementById("map-canvas"), mapOptions );
		
		$(document).ready(function(){
		$.getJSON("https://api.myjson.com/bins/5c32y",function(data) {
					
					var locations = [];
					
					$.each(data, function(i){
					
					
						locations.push(this.end);
						locations.push(this.total_acidentes);
						locations.push(this.acidentes_fatais);
						locations.push(this.lat);
						locations.push(this.long);
												// ADICIONANDO O MARCADOR NO MAPA DE ACORDO COM A LATITUDE E LONGITUDE
											
						if(this.total_acidentes >= 10){
							var image = 'https://raw.githubusercontent.com/VCarnaval/IHC/gh-pages/images/car_red.png';
						}
						else if ((this.total_acidentes >= 3) && (this.total_acidentes <= 9)){
							var image = 'https://raw.githubusercontent.com/VCarnaval/IHC/gh-pages/images/car_yellow.png';
						}
						else {
							var image = 'https://raw.githubusercontent.com/VCarnaval/IHC/gh-pages/images/car_green.png';
						}
						marker = new google.maps.Marker({
						position: new google.maps.LatLng(locations.lat,locations.long),
						title: locations.end + locations.total_acidentes + locations.acidentes_fatais, //INSERINDO OS DADOS NO MARCADOR REFERENTE AO ACIDENTE
						map: map,
						icon: image
						})
					});
					
			});
			});
	

	
	
	/*for (i = 0; i < locations.length; i++) {  
		marker = new google.maps.Marker({
		position: new google.maps.LatLng(locations[i][3], locations[i][4]),
		title: locations[i][0] + locations[i][1] + locations[i][2],
		map: map,
		icon: image
	});
	}
	*/
	
}
      
      google.maps.event.addDomListener(window, 'load', initialize);
	  
    </script>
  </head>
  <body>
  <div class="wrap">
    <div id="map-canvas"></div>
  </div>
  </body>
</html>
