<!DOCTYPE html>
<html>
  <head>
	<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    
	
	<!-- CARREGANDO O API DO GOOGLE MAPS -->
    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=true"></script>
	
	<script src="http://code.jquery.com/jquery-latest.min.js"></script>
	
	<!-- FUNCAO JAVASCRIPT PARA CARREGAR O MAPA E CONFIGURAR ALGUMAS OPCOES BASICAS DISPONIVEIS NA API DO GOOGLE MAPS -->
    <script type="text/javascript">     
	  
		$(document).ready(function(){
		
			var newData = [];
			
			$("#json").empty();
			
			$("#clickMe").click(function () {
			
				var end = $("#data").val();
				
				alert(end);
		
				var num = 0;
		
				$.getJSON("https://api.myjson.com/bins/5c32y",function(data) {
					
					$.each(data, function(i){
					
						if(this.end == end){
						
							this.total_acidentes = this.total_acidentes + 1;
							alert(this.total_acidentes);
							newData = data;
							num = 1;
							
							
						}
						
						
					
						if(num == 0){
						
							var novo = {"end":"end", "total_acidentes": 1};
							var updatedData = JSON.stringify(novo);
							data.push(updatedData);
							newData = data;
							
							
						}
						
					})
					
					$.each(newData, function(i){
							
								$("#json").append(this.end);
								$("#json").append(this.total_acidentes);
					})
	
					
				});	
				
				$.ajax({
						url: "https://api.myjson.com/bins/5c32y",
						type: "PUT",
						data: newData,
						contentType: "application/json; charset=utf-8",
						dataType: "json",
						success: function (data, textStatus, jqXHR) {
							alert("atualizou");
						}
					});
				
				
				
			});
					
		});
	

	

	  
    </script>
	
  </head>
  
  <body>
	
	<textarea id="data" rows="5" cols="40"></textarea>
	<br />
	<input id="clickMe" type="button" value="" />
	
	<div id="json"></div>
	
  </body>
</html>